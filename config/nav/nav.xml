<?xml version="1.0" encoding="utf-8" ?>

<flow>

    <spec name="nav">
        <annotation>
        </annotation>

        <inputs>
        </inputs>

        <outputs>
            <o alias="ax" annotation="accel x"/>
            <o alias="ay" annotation="accel y"/>
            <o alias="az" annotation="accel z"/>
            <o alias="wx" annotation="angrate x"/>
            <o alias="wy" annotation="angrate y"/>
            <o alias="wz" annotation="angrate z"/>
            <o alias="roll" annotation="roll"/>
            <o alias="pitch" annotation="pitch"/>
            <o alias="yaw" annotation="yaw"/>
            <o alias="Vx" annotation="Vx"/>
            <o alias="Vy" annotation="Vy"/>
            <o alias="Vz" annotation="Vz"/>
            <o alias="lat" annotation="lat"/>
            <o alias="lon" annotation="lon"/>
            <o alias="alt" annotation="alt"/>
            <o alias="alt_bar" annotation="barometric altitude"/>
            <o alias="alt_gnd" annotation="lidar alt"/>
        </outputs>

        <params>
        <!-- Here can be the type and parameters of filters, nav mode selection -->
        <!-- Number of sensors, type of ekf -->
        <!-- Maybe use sensor names for driver selection -->
        </params>
    </spec>

    <!-- Iterate sensors -->
    <functions>
        <f name="imu1" by_spec="board.sens.imu.icm20602"/>
    </functions>

    <functions>
        <f name="imu2" by_spec="board.sens.imu.bmi055"/>
    </functions>

    <functions>
        <f name="imu3" by_spec="board.sens.imu.icm20689"/>
    </functions>

    <functions>
        <f name="mag1" by_spec="board.sens.mag.ist8310"/>
    </functions>

    <functions>
        <f name="mag2" by_spec="board.sens.mag.neo-m8n"/>
    </functions>

    <functions>
        <f name="baro" by_spec="board.sens.baro.ms5611"/>
    </functions>

    <functions>
        <f name="gnss" by_spec="board.sens.gnss.neo-m8n"/>
    </functions>

    <!-- Processing -->
    <!-- Integration -->
    <!-- Error calculation -->
    <!-- Complexing -->

    <link_outputs>
        <link alias="ax">zero</link>
        <link alias="ay">zero</link>
        <link alias="az">zero</link>
        <link alias="wx">zero</link>
        <link alias="wy">zero</link>
        <link alias="wz">zero</link>
        <link alias="roll">zero</link>
        <link alias="pitch">zero</link>
        <link alias="yaw">zero</link>
        <link alias="Vx">zero</link>
        <link alias="Vy">zero</link>
        <link alias="Vz">zero</link>
        <link alias="lat">zero</link>
        <link alias="lon">zero</link>
        <link alias="alt">zero</link>
        <link alias="alt_bar">zero</link>
        <link alias="alt_gnd">zero</link>
    </link_outputs>

</flow>
